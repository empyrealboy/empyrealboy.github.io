<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>The Observatorium: OSS EU 2019</title>

		<link rel="stylesheet" href="../../css/reveal.css">
		<link rel="stylesheet" href="css/base.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="../../lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? '../../css/print/pdf.css' : '../../css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section data-background-image="img/bg3.png">
					<h2>The Observatorium</h2>
                    <h4>[Machine Learning] + [Observability]</h4>
                    <h4>=</h4> 
                    <h4>Improved Incident Response</h4> 
					<h5 style="font-size: 24px; color: #eee;">akass@digitalocean.com</h5>
					<img src="img/do_white.png" height="80px">
					<p style="font-size: 16px; text-align: center; color: #bbb">Lyon, 28 Octobre, 2019</p>
				</section>
				<section data-background-image="img/bg3.png" data-background-opacity=0.2>
				  <h2 class="fragment fade-up" data-fragment-index="0" style="text-align: left">✓, TOC.</h2>
				  <p class="fragment" style="font-size:32px">1. <code>alex@digitalocean:~$ whoami/who_we_are</code></p>
				  <p class="fragment" style="font-size:32px">2. The Observatorium:  <em>Motivations and Foundations</em></p>
				  <p class="fragment" style="font-size:32px">3. Putting the pieces together</em></p>
				  <p class="fragment" style="font-size:32px">4. 2020 Vision</p>
				  <p class="fragment" style="font-size:32px">5. Questions (and Answers?)</p>
				</section>
				<section data-background-image="img/bg3.png" data-background-opacity=0.2>
					<h5><code>alex@digitalocean:~$ whoami/who_we_are</code></h5>
					<section data-transition="zoom-in fade-out" data-transition-speed="slow">
						<p></p>
						<h4 class="fragment fade-up" data-fragment-index="0"><img src="img/do_blue.png" height="60px"></h4>
						<h5 class="fragment">Global Cloud Hosting Provider</h5>
						<h5 class="fragment">12 Data Centers, worldwide</h5>
						<h5 class="fragment">DO builds <strong>products</strong> that help engineering teams build, deploy and scale cloud applications</h5>
						<h5>
							<img class="fragment" src="img/droplet.png" height="120px">
							<img class="fragment" src="img/block_attachment.png" height="120px">
							<img class="fragment" src="img/spaces.png" height="120px">
						</h5>
						<h5 class="fragment">
							<img src="img/private_networking.png" height="54px">
							<img src="img/rest_api.png" height="54px">
							<img src="img/lbaas.png" height="54px">
							<img src="img/secure.png" height="54px">
							<img src="img/floating_ip.png" height="54px">
							<img src="img/networking_speed.png" height="54px">
							<img src="img/monitoring1.png" height="54px">
							<img src="img/oss_apps.png" height="54px">
							<img src="img/teams.png" height="54px">
							<img src="img/uptime.png" height="54px">
						</h5>
					</section>
					<section data-transition="fade-in fade-out" data-transition-speed="slow">
						<div style="float: center; width: 1000px;" align="center">
							<div style="float: left; width: 500px;" class="fragment">Observability Applications</div>
							<div style="float: left; width: 100px;" class="fragment">+</div>
							<div style="float: left; width: 400px;" class="fragment">Infra Analytics</div>
						</div>
						<br>
						<hr class="fragment">
						<div style="float: center; width: 1000px;" align="center" class="fragment">
							Analytics Infrastructure
						</div>
						<h5>
							<img class="fragment" src="img/mesos_logo.png" height="120px">
							<img class="fragment" src="img/kafka_logo.png" height="120px">
							<img class="fragment" src="img/hdfs.png" height="120px">
							<img class="fragment" src="img/hive.png" height="120px">
							<img class="fragment" src="img/presto.png" height="120px">
						</h5>
					</section>
					<section data-transition="fade-in fade-out" data-transition-speed="slow">
						<div style="float: center; width: 1000px;" align="center">
							<div style="float: left; width: 500px; color: #0080FF">Observability Applications</div>
							<div style="float: left; width: 100px; text-align: center">+</div>
							<div style="float: left; width: 400px;">Infra Analytics</div>
						</div>
						<br>
						<hr>
						<div style="float: center; width: 1000px;" align="center">
							What is the <span style="color: #0080FF">OA</span> Mission?
						</div>
						<ul style="font-size: 32px;">
							<li class="fragment" style="margin: 20px;">to <strong>simplify</strong> and <strong>optimize</strong> consumption of data internally</li>
							<li class="fragment" style="margin: 20px;">to <strong>reduce</strong> incident <strong>MTTD/MTTR</strong> through custom applications</li>
							<li class="fragment" style="margin: 20px;">to help <strong>define</strong>, <strong>maintain</strong>, and <strong>broadcast</strong> source-of-truth performance and reliability data to the rest of the organization</li>
						</ul>
					</section>
					<section data-transition="fade-in fade-out" data-transition-speed="slow">
						<div style="float: center; width: 1000px;" align="center">
							<div style="float: left; width: 500px;">Observability Applications</div>
							<div style="float: left; width: 100px; text-align: center">+</div>
							<div style="float: left; width: 400px; color: #0080FF">Infra Analytics</div>
						</div>
						<br>
						<hr>
						<div style="float: center; width: 1000px;" align="center">
							What is the <span style="color: #0080FF">IA</span> Mission?
						</div>
						<ul style="font-size: 32px;">
							<li class="fragment" style="margin: 20px;">to <strong>generate insights</strong> through data for the Infra org</li>
							<li class="fragment" style="margin: 20px;">to build and oversee a <strong>centralized data platform</strong></li>
							<li class="fragment" style="margin: 20px;">to help <strong>define</strong>, <strong>maintain</strong>, and <strong>broadcast</strong> source-of-truth performance and reliability data to the rest of the organization</li>
						</ul>
					</section>
					<section>
						<h5>&nbsp;</h5>
						<em><font color="#0080FF" class="fragment"> How can we achieve these things?</font></em>
						<ul style="font-size: 32px;">
							<li style="margin: 20px;">to <strong>simplify</strong> and <strong>optimize</strong> consumption of data</li>
							<li style="margin: 20px;">to <strong>reduce</strong> incident <strong>MTTD/MTTR</strong> through custom applications</li>
							<li style="margin: 20px;">to <strong>generate insights</strong> through data for the Infra org</li>
							<li style="margin: 20px;">to build and oversee a <strong>centralized data platform</strong></li>
							<li style="margin: 20px;">to help <strong>define</strong>, <strong>maintain</strong>, and <strong>broadcast</strong> source-of-truth performance and reliability data to the rest of the organization</li>
						</ul>
					</section>
					<section>
						<h5>&nbsp;</h5>
						<em><font color="#0080FF"> How can we achieve these things?</font></em>
						<ul style="font-size: 32px;">
							<li style="margin: 20px; opacity: 0.0; font-size:24px;">to <strong>simplify</strong> and <strong>optimize</strong> consumption of data</li>
							<li style="margin: 20px; opacity: 0.0; font-size:24px;">to <strong>reduce</strong> incident <strong>MTTD/MTTR</strong> through custom applications</li>
							<li style="margin: 20px; opacity: 1.0; font-size: 48px;" class="fragment">The Observatorium™</li>
							<li style="margin: 20px; opacity: 0.0">to build and oversee a <strong>centralized data platform</strong></li>
							<li style="margin: 20px; opacity: 0.0">to help <strong>define</strong>, <strong>maintain</strong>, and <strong>broadcast</strong> source-of-truth performance and reliability data to the rest of the organization</li>
						</ul>
					</section>
				</section>
				<section data-background-image="img/bg3.png" data-background-opacity=0.5>
					<h5><code>The Observatorium: <br>Motivations & Foundations...what? why?</code></h5>
				</section>
				<section data-background-image="img/bg3.png" data-background-opacity=0.5>
					<h5><code>The Observatorium: Motivations & Foundations...<strong>what?</strong> why?</code></h5>
					<section>
						<div class="fragment">A centralized application to help reduce MTTD/MTTR<br></div>
						<div class="fragment">i.e. the <em>cost/impact of incidents</em></div>
					</section>
				</section>
				<section data-background-image="img/bg3.png" data-background-opacity=0.3>
					<h5><code>The Observatorium: Motivations & Foundations...what? <strong>why?</strong></code></h5>
					<section>
						<ul style="font-size: 24px;">
							<li style="margin: 20px;" class="fragment">"I want to know the <strong>current health of the cloud</strong>"</li>
							<li style="margin: 20px;" class="fragment">"I want to see the live health and <strong>historical performance</strong> of all services that relate to Droplet Creation"</li>
							<li style="margin: 20px;" class="fragment">"There’s currently an outage.  I wonder if any <strong>outages like this one</strong> have occurred before, and if so, how they were fixed."</li>
							<li style="margin: 20px;" class="fragment">"I want to understand the reliability of any/all <strong>customer-facing products over time</strong>"</li>
							<li style="margin: 20px;" class="fragment">"How much of our team’s weekly/monthly/annual <strong>error budget</strong> have we depleted as of today?"</li>
							<li style="margin: 20px;" class="fragment">"I want to know if there are <strong>warning signs</strong> around the current performance of my service(s) that will lead to <strong>degradation in the near future</strong>"</li>
						</ul>
					</section>
				</section>


				<section data-background-image="img/bg3.png" data-background-opacity=0.5 >
					<h5><code>The Observatorium - how do we get there?</code></h5>
				</section>


				<section data-background-image="img/bg3.png" data-background-opacity=0.5>
					<h5><code>The Observatorium - how do we get there?</code></h5>
					<section>
						<strong>Foundations</strong> and Motivations
					</section>
					<section>
						<strong>Foundations</strong>: <br>SLM | Service Catalog | Observability Platforms
					</section>
				</section>


				<section data-background-image="img/bg3.png" data-background-opacity=0.3>
					<h5><code>The Observatorium: Foundations</code></h5>
					<div align="center" style="font-size: 20px;"><code><strong>SLM</strong> | Service Catalog | Observability Platforms</code></div>
					<section>
						<h4>Service Level Management (SLM)</h4>
						<div class="fragment" style="font-size: 28px;">
							"A program of work to measure and surface performance and reliability data that drives actionable insight."
						</div>
					</section>
					<section data-markdown data-transition="fade-in fade-out" data-notes="A program of work to measure and surface performance and reliability data that drives actionable insight.">
						|      | SLM  |      |
						|------|------|------|
						| SLAs | SLOs | SLIs |
					</section>
					<section data-markdown data-transition="fade-out">
						| SLA |
						|:-----:|
						| an Agreement with consequences.    |
					</section>
					<section data-markdown data-transition="fade-out">
						|  SLO    |
						|:------:|
						| an Objective, or goal, but not a commitment.    | 
					</section>
					<section data-markdown data-transition="fade-out">
						|  SLI    |
						|:------:|
						| an Indicator, or metric, that reveals whether an SLO is being met.    | 
					</section>
					<section data-markdown data-transition="fade-out">
						|  |
						|:------:|
						|  SLA = service consumption    |
						|  SLO/SLI = service production    | 
						|  |
					</section>
					<section>
						<h5>Organizational Prioritization</h5>
						<ol style="font-size: 32px;">
							<li class="fragment">SLOs/SLIs</li>
							<li class="fragment">SLAs</li>
						</ol>
					</section>
					<section>
						<h5>Problem Statements:</h5>
						<ul style="font-size: 28px;">
							<li class="fragment" style="margin: 20px;">Who owns the SLOs and SLIs for individual services?</li>
								<div style="float: center; text-align: right" class="fragment">(The service owner teams)</div>
							<li class="fragment" style="margin: 20px;">Where are these SLOs/SLIs defined?</li>
								<div  style="float: center; text-align: right" class="fragment">(A catalog of services...)</div>
						</ul>
					</section>
				</section>
				<section data-background-image="img/bg3.png" data-background-opacity=0.3>
					<h5><code>The Observatorium: Foundations</code></h5>
					<div align="center" style="font-size: 20px;"><code>SLM | <strong>Service Catalog</strong> | Observability Platforms</code></div>
					<section>
						<h4>Service Catalog</h4>
						<div class="fragment" style="font-size: 24px;">
							"A Central Authority for Distributed Microservices"<br><br>
						</div>
						<div class="fragment" style="font-size: 24px;">
							<strong>Requirement:</strong> a service <em>must</em> have a complete SC entry to be able to deploy to production
						</div>
						<br>
						<div class="fragment" style="font-size: 24px;">
							But what is a <em>complete</em> entry?
						</div>
					</section>
					<section>
						<h5>Example <img src="img/ok_hand.png" style="vertical-align: bottom"> SC Entry</h5>
						<pre class="fragment" style="font-size: 14px;"><code class="language-yaml">contact: TEAM_EMAIL@digitalocean.com
criticality: SEV-1
desc: Harpoon is a compute owned service responsible for queuing and processing events in the DigitalOcean cloud. This service replaces the use of alpha in event processing.
dependencies: ['alpha', 'consul', 'docc', 'emu', 'hvd', 'rabbitmq']
github: https://link/to/github/repo/README.md
id: 1
jira: HPN
name: harpoon
notes: Harpoon services are critical for processing all the events in the cloud since they orchestrate the underlying microservices.
pager_duty: PD_CODE
product: droplet
slack: '#harpoon'
sli: sum(increase(harpoon_server_request_duration_seconds_count{code!="Internal", code!="Unavailable", docc_app="harpoon-server"}[2m])) / sum(increase(harpoon_server_request_duration_seconds_count{docc_app="harpoon-server"}[2m]))
slo: .995
team: Harpoon
</code></pre>
					</section>
				</section>


				<section data-background-image="img/bg3.png" data-background-opacity=0.3>
					<h5><code>The Observatorium: Foundations</code></h5>
					<div align="center" style="font-size: 20px;"><code>SLM | Service Catalog | <strong>Observability Platforms</strong></code></div>
					<section>
						<h4>Observability Platforms</h4>
						<h5 class="fragment">Prometheus / Pandora</h5>
						<h5 class="fragment">Syslog / Polyjuice</h5>
						<h5 class="fragment">Kafka / Firebolt</h5>
					</section>
				</section>
				<section data-background-image="img/bg3.png" data-background-opacity=0.3>
					<h5><code>The Observatorium: Foundations</code></h5>
					<div align="center" style="font-size: 20px;"><code>SLM | Service Catalog | <strong>Observability Platforms</strong></code></div>
					<div align="center" style="font-size: 20px;"><code><strong>Prometheus/Pandora</strong> | Syslog/Polyjuice | Kafka/Firebolt</code></div>
					<section>
						<h5 class="fragment">Prometheus --> Pandora</h5>
					</section>
					<section>
						<img src="img/prometheus-logo-long.png" style="height: 40px;">
						<div>
							<ul style="text-align: left; font-size: 24px;">
								<li class="fragment" style="margin: 10px;">Easy to implement and deploy at scale</li>
								<li class="fragment" style="margin: 10px;">Flexible time-series metrics
									<ul style="font-size: 20px;">
										<li class="fragment"><em>Counters</em>: monotonically increasing</li>
										<img class="fragment" src="img/lb_uptime_counter.png" style="height: 80px;">
										<li class="fragment"><em>Gauges</em>: metrics for a current state of a service</li>
										<img class="fragment" src="img/object_storage_throughput_graph.png" style="height: 80px">
										<li class="fragment"><em>Recording Rules</em>: custom queries generate custom metrics - <strong>SLIs!</strong></li>
									</ul>
								</li>
							</ul>
						</div>
					</section>
					<section>
						<h5>&nbsp;</h5>
						<h5>&nbsp;</h5>
						<h5>Globally-distributed servers</h5>
						<table>
							<tr class="fragment" data-fragment-index="0">
								<td><img src="img/prometheus-logo-square.png" style="height: 60px"></td>
								<td><img src="img/prometheus-logo-square.png" style="height: 60px"></td>
								<td><img src="img/prometheus-logo-square.png" style="height: 60px"></td>
							</tr>
							<tr class="fragment" data-fragment-index="2">
								<td><img src="img/prometheus-logo-square.png" style="height: 60px"></td>
								<td style="vertical-align: middle;">???</td>
								<td><img src="img/prometheus-logo-square.png" style="height: 60px"></td>
							</tr>
							<tr class="fragment" data-fragment-index="1">
								<td><img src="img/prometheus-logo-square.png" style="height: 60px"></td>
								<td><img src="img/prometheus-logo-square.png" style="height: 60px"></td>
								<td><img src="img/prometheus-logo-square.png" style="height: 60px"></td>
							</tr>
						</table>
						<h5 class="fragment">...</h5>
					</section>
					<section>
						<h5>&nbsp;</h5>
						<h5>&nbsp;</h5>

						<h5 class="fragment"><strong>PANDORA</strong></h5>
						<pre class="fragment" style="font-size: 16px;"><code class="language-css" style="word-wrap: break-word; text-align: center;">
"a bunch of Prometheus servers on management droplets 
configured using a Git repository and some Go code" - the humble owner
						</code></pre>
						<div style="float: left; width: 420px;">
						<pre class="fragment" style="width: 420px; font-size: 12px;"><code class="language-yaml" style="word-wrap: break-word;">---
hosts:
  prod-rsyslog-ams2:
    port: 44221
    chef:
      query: fqdn:prod-syslog* AND region:ams2

relabels:
  -
    regex: |-
      [^\.]+\.([^\.]+)\..*
    replacement: "${1}"
    source_labels:
      - __address__
    target_label: region

scrape_config:
  scrape_interval: 5m
						</code></pre></div><div style="float: right; width: 420px;"><img class="fragment" src="img/prometheus_2h_query.png" style="height: 280px;"></div>
					</section>
					<section>
						<h5>A quick interjection:</h5>
						<div style="font-size: 24px;">We must modify Prometheus/Pandora to provide a <em>push rather than pull architecture</em> to allow Observatorium to scale</div>
						<pre class="fragment" style="font-size: 14px;"><code class="language-yaml">remote_write:
  - url: http://observatorium-ingester.internal.digitalocean.com:9190/ingester
    write_relabel_configs:
      - source_labels: [__name__]
        regex: 'sli:.*'
        action: keep
      - source_labels: [observatorium]
        regex: 'sli'
        action: keep</code></pre>
					</section>
				</section>
				<section data-background-image="img/bg3.png" data-background-opacity=0.3>
					<h5><code>The Observatorium: Foundations</code></h5>
					<div align="center" style="font-size: 20px;"><code>SLM | Service Catalog | <strong>Observability Platforms</strong></code></div>
					<div align="center" style="font-size: 20px;"><code>Prometheus/Pandora| <strong>Syslog/Polyjuice</strong> | Kafka/Firebolt</code></div>
					<section>
						<h5 class="fragment">Syslog + Polyjuice (+ Pandora)</h5>
						<img src="img/rsyslog_logo.png" class="fragment" height="60px">
						<div align="center" class="fragment" style="font-size: 24px;">Polyjuice is intended for systems which log to syslog but are unable - or cost-prohibitively able - to expose prometheus-compatible metrics.</div>
					</section>
					<section>
						<br>
						<div align="center" class="fragment" style="font-size: 24px;"><em>Polyjuice structured analogously to Pandora:</em></div>
						<pre class="fragment" style="font-size: 14px;"><code class="language-yaml">---
rules:
- matcher:
    value_matcher:
      type: program
      match_type: prefix_match
      value: polyjuice
  metrics_prefix: polyjuice
  common_labels:
  - name: resp_code
    field: response.code
  metrics:
  - help: 'Polyjuice HTTP response times (ms)'
    name: http_resp_time_ms
    filters:
    - kv_matcher:
        key: response.code
        match_type: gte
        num_value: 200
    field: response.time_ms
    type: histogram_vec
    buckets: [ 1, 4, 16, 64, 256, 1024, 4096, 16384, 32768 ]</code></pre>
					</section>
					<section>
						<div align="center" class="fragment" style="font-size: 16px; text-align: left;">
							<pre class="fragment" style="font-size: 16px;"><code><190>2019-01-29T19:53:16.450156+00:00 flux-kubernetes03.nyc3.internal.digitalocean.com polyjuice_flux[1]: @cee: {"response":{"code":201,"time_ms":12}}</code></pre></div>
						<div align="center" class="fragment">...</div>
						<pre class="fragment" style="font-size: 16px;"><code># HELP polyjuice_http_resp_time_ms Polyjuice HTTP response time (ms)<br>
# TYPE polyjuice_http_resp_time_ms histogram
polyjuice_http_resp_time_ms_bucket{resp_code="201",le="1"} 1
polyjuice_http_resp_time_ms_bucket{resp_code="201",le="4"} 1
polyjuice_http_resp_time_ms_bucket{resp_code="201",le="16"} 1
polyjuice_http_resp_time_ms_bucket{resp_code="201",le="64"} 0
polyjuice_http_resp_time_ms_bucket{resp_code="201",le="256"} 0
polyjuice_http_resp_time_ms_bucket{resp_code="201",le="1024"} 0
polyjuice_http_resp_time_ms_bucket{resp_code="201",le="4096"} 0
polyjuice_http_resp_time_ms_bucket{resp_code="201",le="16384"} 0
polyjuice_http_resp_time_ms_bucket{resp_code="201",le="32768"} 0
polyjuice_http_resp_time_ms_bucket{resp_code="201",le="+Inf"} 0
polyjuice_http_resp_time_ms_sum{resp_code="201"} 12</code></pre>
					</section>
				</section>
				<section data-background-image="img/bg3.png" data-background-opacity=0.3>
					<h5><code>The Observatorium: Foundations</code></h5>
					<div align="center" style="font-size: 20px;"><code>SLM | Service Catalog | <strong>Observability Platforms</strong></code></div>
					<div align="center" style="font-size: 20px;"><code>Prometheus/Pandora | Syslog/Polyjuice | <strong>Kafka/Firebolt</strong></code></div>
					<section>
						<h5 class="fragment">Kafka + Firebolt</h5>
					</section>
					<section>
						<pre class="fragment" style="font-size: 16px;"><code class="language-css" style="word-wrap: break-word; text-align: center;">"Firebolt is intended to address a number of concerns that are common to near-realtime data pipeline applications, making it easy to run a clustered application that scales predictably to handle large data volume."</code></pre>
						<ul style="font-size:20px;">
							<li class="fragment" style="margin: 20px;">Kafka sources - Minimal configuration and no code required to <strong>consume</strong> from a Kafka topic, consumer lag metrics included</li>
							<li class="fragment" style="margin: 20px;">Kafka sinks - Same for <strong>producing</strong> to a Kafka topic</li>
							<li class="fragment" style="margin: 20px;">Outage Recovery 1: offset management - Configurable Kafka offset management during recovery lets you determine the maximum "catch up" to attempt after an outage, so you can <strong>quickly get back to realtime processing.</strong></li>
							<li class="fragment" style="margin: 20px;">Outage Recovery 2: parallel recovery - After an outage, process realtime data and "fill-in" the outage time window <strong>in parallel</strong>, with a rate limit on the recovery window.</li>
							<li class="fragment" style="margin: 20px;">Monitorability - Firebolt <strong>exposes Prometheus metrics</strong> to track the performance of your Source and all Nodes without writing code. Your nodes can expose their own custom internal metrics as needed.</li>
						</ul>
					</section>
				</section>

				<section data-background-image="img/bg3.png" data-background-opacity=0.3>
					<h5><code>The Observatorium: Motivations</code></h5>
					<section>
						<ul style="font-size: 24px;" class="fragment">
							<li style="margin: 20px;">"I want to know the <strong>current health of the cloud</strong>"</li>
							<li style="margin: 20px;">"I want to see the live health and <strong>historical performance</strong> of all services that relate to Droplet Creation"</li>
							<li style="margin: 20px;">"There’s currently an outage.  I wonder if any <strong>outages like this one</strong> have occurred before, and if so, how they were fixed."</li>
							<li style="margin: 20px;">"I want to understand the reliability of any/all <strong>customer-facing products over time</strong>"</li>
							<li style="margin: 20px;">"How much of our team’s weekly/monthly/annual <strong>error budget</strong> have we depleted as of today?"</li>
							<li style="margin: 20px;">"I want to know if there are <strong>warning signs</strong> around the current performance of my service(s) that will lead to <strong>degradation in the near future</strong>"</li>
						</ul>
					</section>
					<section>
						<img src="img/list_of_wants.png" width=480px; style="border: 2px solid #000">
						<div class="fragment">This is a product,<br>with multiple customer personas.</div>
					</section>
				</section>
				<section data-background-image="img/bg3.png" data-background-opacity=0.3>
					<h5>
						<code>Putting the pieces together</code>
					</h5>
					<section>
						<img class="fragment" src="img/observatorium_arch.svg">
					</section>
					<section>
						<h5>
							(record scratch sound)
						</h5>
					</section>
					<section>
						<img src="img/observatorium_arch_highlighted.svg">
					</section>
					<section>
						<img src="img/observatorium_arch_highlighted_flow.svg">
					</section>
					<section>
						<h5>The Path of a single event</h5>
					</section>
				</section>
				<section data-background-image="img/bg3.png" data-background-opacity=0.3>
					<h5>
						<code>The Path of a single event: Pandora/Prometheus</code>
					</h5>
					<section>
	      				<img src="img/single_event_a_1.svg">
						<pre class="fragment" style="font-size: 14px;"><code class="language-yaml">recording_rules:
  - record: sli:alpha_write_latency:p99
    expr: |-
      histogram_quantile(0.99,sum(rate(mysql_info_schema_write_query_response_time_seconds_bucket{cluster="alpha"}[5m]))
      by (le))
    labels:
      observatorium: sli</code></pre>
      				<pre class="fragment" style="font-size: 14px;"><code class="language-yaml">{"status":"success","data":{"resultType":"vector","result":[{"metric":{"__name__":"sli:alpha_write_latency:p99","observatorium":"sli"},"value":[1572182521.252,"0.020096308724832153"]}]}}</code></pre>
      				<img class="fragment" src="img/write_latency_pandora.png">
					</section>
				</section>
				<section data-background-image="img/bg3.png" data-background-opacity=0.3>
					<h5>
						<code>The Path of a single event: <br>Observatorium Ingestion/Digestion</code>
					</h5>
					<section>
	      				<img src="img/single_event_a_2.svg">
						<pre class="fragment" style="font-size: 14px;"><code class="language-yaml">labels {key: "observatorium" value: "sli"}
labels {key: "replica" value: "general-2d3a637.fra1"} labels {key: "__name__" value: "sli:alpha_write_latency:p99"} samples {key: 1572182521.252 value: 0.020096308724832153}</code></pre>
					</section>
				</section>
				<section data-background-image="img/bg3.png" data-background-opacity=0.3>
					<h5>
						<code>The Path of a single event: <br>HDFS Data Lake</code>
					</h5>
					<section>
      				<img src="img/single_event_a_3.svg">
						<pre class="fragment" style="font-size: 14px; width: 1024px;"><code class="language-yaml">Row(
	metric_name='sli:alpha_write_latency:p99', 
	time=datetime.datetime(2019, 10, 27, 13, 22, 1, 379000), 
	value=0.020096308724832153, 
	labels={'replica': 'general-49ae403.nyc3', '__name__': 'sli:alpha_write_latency:p99', 'observatorium': 'sli'}, 
	meta={}
)</code></pre>
					</section>
				</section>
				<section data-background-image="img/bg3.png" data-background-opacity=0.3>
					<h5>
						<code>The Path of a single event: <br>The Trim Reaper™</code>
					</h5>
					<section>
	      				<img src="img/single_event_a_4.svg">
						<pre class="fragment" style="font-size: 14px;"><code class="language-sql">select * from hive.observatorium.metrics_data where metric_name = 'sli:alpha_write_latency:p99' limit 1\G

-[ RECORD 1 ]----------------------------------------------------------------------------------------
time        | 2019-10-27 13:22:01.379
value       | 0.020096308724832153
labels      | {replica=general-2d3a637.fra1, __name__=sli:alpha_write_latency:p99, observatorium=sli}
meta        | {}
metric_name | sli:alpha_write_latency:p99
year        | 2019
month       | 10
day         | 27
hour        | 13</code></pre>
					</section>
				</section>
				<section data-background-image="img/bg3.png" data-background-opacity=0.3>
					<h5>
						<code>The Path of a single event: <br>Observatorium service-event-source</code>
					</h5>
					<section>
	      				<img src="img/single_event_b_3.svg">
						<pre class="fragment" style="font-size: 12px; width: 950px;"><code class="language-sql">|name                       |start              |end                |aggregator|aggregatorLabel|objective|value     |observations|
+---------------------------+-------------------+-------------------+----------+---------------+---------+----------+------------+
|sli:alpha_write_latency:p99|2019-10-27 09:45:00|2019-10-27 09:55:00|null      |null           |0.2      |0.02772143|20          |</code></pre>
					</section>
				</section>
				<section data-background-image="img/bg3.png" data-background-opacity=0.3>
					<h5>
						<code>The Path of a single event: <br>The Observatorium UI</code>
					</h5>
					<section>
      					<img src="img/single_event_b_4.svg">
						<img class="fragment" src="img/obs_ui_cropped.png" style="height: 160px; width:1024px;">
					</section>
				</section>
				<section data-background-image="img/bg3.png" data-background-opacity=0.3>
					<h5>
						<code>Putting the pieces together<br>Stepping Back</code>
					</h5>
					<section>
						<img class="fragment" src="img/motivations.svg">
					</section>
					<section>
						<img class="fragment" src="img/observatorium_arch_simple.svg">
					</section>
				</section>
				<section data-background-image="img/bg3.png" data-background-opacity=0.3>
					<h5>
						<code>Putting the pieces together</code>
					</h5>
					<section>
						<img src="img/mot1.svg">
					</section>
					<section>
						<img src="img/mot2.svg">
					</section>
					<section>
						<img src="img/mot3.svg">
					</section>
					<section>
						<img src="img/mot4.svg">
					</section>
					<section>
						<img src="img/mot5.svg">
					</section>
					<section>
						<img src="img/mot6.svg">
					</section>
					<section>
						<img src="img/observatorium_alternative_arch.svg">
					</section>
					<section>
						<img src="img/live_pane.svg">
						<img class="fragment" src="img/slm_agg.svg">
						<img class="fragment" src="img/error_budget.svg">
					</section>
					<section>
						<div style="float: left; width: 550px;"><img src="img/incident_api_witout.svg" style="height: 480px;"></div>
						<div style="float: right; width: 350px;"><code style="font-size: 16px;"></code></div>
					</section>
					<section>
						<div style="float: left; width: 550px;"><img src="img/incident_api_wit.svg" style="height: 480px;"></div>
						<div style="float: right; width: 350px;"><code style="font-size: 16px;"><p class="fragment">1) Incident triggered</p>
<p class="fragment">2) Annotation begins against all services → EDW</p>
<p class="fragment">3) Historical records of previous incidents are surfaced</p>
<p class="fragment">4) Matrices of Service performance vectors are pulled from EDW and compared/clustered</p>
<p class="fragment">5) Nearest Neighbor (or other clustering algo) provides best incident match to current incident patterns</p>
<p class="fragment">6) Suggestions surfaced to end user, including metadata</p>
<p class="fragment">7) After Incident concludes, post-mortem metadata written back to DB</p>
<img class="fragment" src="img/mttr_down.svg" style="height: 80px;"></code></div>
					</section>
					<section>
						<div style="float: left; width: 600px;"><img src="img/degradation_prognostication.svg" style="height: 480px;"></div>
						<div style="float: right; width: 350px;"><code style="font-size: 16px;"><p class="fragment">1) House money: Historical performance/reliability metrics already exist/are warehoused for services and their dependencies</p>
<p class="fragment">2) Vector AutoRegressive models batched/refreshed regularly</p>
<p class="fragment">3) Forecasts predicting degradation with enough significance enter the <strong>Alerting protocol</strong></p>
<p class="fragment">4) Warnings/Messaging arrive to the owner teams before service drops too low</p>
<img class="fragment" src="img/incidents_down.svg" style="height: 120px;"></code></div>
					</section>
				</section>
				<section data-background-image="img/bg4.png" data-background-opacity=0.5 data-transition="fade-in fade-out" data-transition-speed="slow">
					<h5>
						<code>2020 Vision</code>
					</h5>
					<section>
						<code>Adoption</code>
						<ul style="font-size: 24px;">
							<li class="fragment" style="margin: 20px;"><code>Service Catalog becomes the official DO service gatekeeper:<br>"If you don't comply, you don't deploy"™</code></li>
							<li class="fragment" style="margin: 20px;"><code>Active efforts to broaden usage among diverse internal customer base</code></li>
							<li class="fragment" style="margin: 20px;"><code>New product SLAs to be predicated on official SLM data</code></li>
							<li class="fragment" style="margin: 20px;"><code>Telemetry to reveal who uses the product and how often</code></li>
							<li class="fragment" style="margin: 20px;"><code>Reliability measured in staging/pre-prod environments before deploying to production</code></li>
						</ul>
					</section>
					<section>
						<code>Expansion</code>
						<ul style="font-size: 24px;">
							<li class="fragment" style="margin: 20px;"><code>All services have SLOs and SLIs no matter their proximity to customers</code></li>
							<li class="fragment" style="margin: 20px;"><code>Error budgets available ad hoc for any historical time period</code></li>
							<li class="fragment" style="margin: 20px;"><code>Source metric format expands to include non-Pandora data:<br>Kafka streams | Structured SQL DBs</code></li>
							<li class="fragment" style="margin: 20px;"><code>Integration with production/staging deployment tracking</code></li>							
						</ul>
					</section>
					<section>
						<code>Impact</code>
						<ul style="font-size: 24px;">
							<li class="fragment" style="margin: 20px;"><code>Significant reduction of MTTR</code></li>
							<li class="fragment" style="margin: 20px;"><code>Fewer customer tickets/complaints about reliability</code></li>
							<li class="fragment" style="margin: 20px;"><code>Teams iterate on their SLOs and work to reduce outage counts/overall time running degraded services</code></li>
							<li class="fragment" style="margin: 20px;"><code>More mature pattern recognition among microservices leads to better cross-team developmental collaboration and more cohesive architecture</code></li>
						</ul>
					</section>
				</section>
				<section data-background-image="img/bg7.png" data-background-opacity=0.5>
					<h5><code>Some final thoughts</code></h5>
					<section>
						<ul style="font-size: 28px;">
							<li class="fragment" style="margin: 20px;">
								Always <strong>think like a product manager</strong>, even when building internal applications
							</li>
							<li class="fragment" style="margin: 20px;">
								You can't make a great data product without a great set of <strong>fundamental tools</strong>
							</li>
							<li class="fragment" style="margin: 20px;">
								Use (internal/external) OSS tools when available, as they allow for <strong>better customization</strong> when building novel systems
							</li>
							<li class="fragment" style="margin: 20px;">
								Do everything you can to improve <strong>reliability</strong>, <strong>objectivity</strong>, and <strong>accountability</strong> at your organization!
							</li>
						</ul>
					</section>
				</section>
				<section data-background-image="img/bg7.png" data-background-opacity=0.5>
					<h2>Thank you!</h2>
				</section>
			</div>
		</div>

		<script src="../../lib/js/head.min.js"></script>
		<script src="../../js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				dependencies: [
					{ src: '../../plugin/markdown/marked.js' },
					{ src: '../../plugin/markdown/markdown.js' },
					{ src: '../../plugin/notes/notes.js', async: true },
					{ src: '../../plugin/highlight/highlight.js', 
					  async: true, 
					  callback: function() { 
					  	hljs.initHighlightingOnLoad(); 
					  } 
					}
				],
				fragmentInURL: true,
				slideNumber: true,
				history: true,
				transition: 'fade', // none/fade/slide/convex/concave/zoom
				transitionSpeed: 'slow' // default/fast/slow
			});
		</script>

	<style type="text/css">
	    /* 1. Style header/footer <div> so they are positioned as desired. */
	    #header-left {
	        position: absolute;
	        top: 0%;
	        left: 0%;
	    }
	    #header-right {
	        position: absolute;
	        top: 0%;
	        right: 0%;
	    }
	    #footer-left {
	        position: absolute;
	        bottom: 2%;
	        left: 2%;
	    }
	    .reveal p {
	    	margin: 20px 0;
	    	line-height: 1.3;
	    	text-align: left; 
	    	color: #595959;
	    }
	    .reveal .slides header {
	    	position:absolute;
	    	top: -50%;
	    	left: -50%;
	    }
        .reveal .slides section .fragment.fade-down {
	        opacity: 1;
	        visibility: visible;
	    }
	    .reveal .slides section .fragment.fade-down.visible,
	    .reveal .slides section .fragment.visible:not(.current-fragment) {
	        color: #595959;
	    }
	    .reveal .slides section .fragment.fade-down,
	    .reveal .slides section .fragment.current-fragment {
	        color: #0080FF;
	    }
        .reveal .slides section .fragment.fade-up {
	        opacity: 1;
	        visibility: visible;
	    }
	    .reveal .slides section .fragment.fade-up.visible,
	    .reveal .slides section .fragment.visible:not(.current-fragment) {
	        color: #595959;
	    }
	    .reveal .slides section .fragment.fade-up,
	    .reveal .slides section .fragment.current-fragment {
	        color: #0080FF;
	    }

	    .reveal section img { 
	    	background:none; 
	    	border:none; 
	    	box-shadow:none; 
	    }

	</style>

	<!-- 2. Create hidden header/footer <div> -->
	<div id="hidden" style="display:none;">
	    <div id="header">
	        <div id="footer-left"><img src="img/digitalocean_blue.png" height="40px;"></div>
	    </div>
	</div>

	<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
	<script type="text/javascript">
	    // 3. On Reveal.js ready event, copy header/footer <div> into each `.slide-background` <div>
	    var header = $('#header').html();
	    if ( window.location.search.match( /print-pdf/gi ) ) {
	        Reveal.addEventListener( 'ready', function( event ) {
	            $('.slide-background').append(header);
	        });
	    }
	    else {
	        $('div.reveal').append(header);
	   }
	</script>

	</body>
</html>
